const translations = {
    fr: {
        skipLink: "Aller au contenu principal",
        "nav.home": "Accueil",
        "nav.about": "À propos",
        "nav.projects": "Projets",
        "nav.contact": "Contact",
        "hero.title1": "Bienvenue, je suis",
        "hero.title2": "Développeur Web",
        "hero.subtitle": "Je conçois mes premiers projets web avec passion et rigueur, en alliant apprentissage et créativité.",
        "hero.btnProjects": "Voir mes projets",
        "hero.btnContact": "Me contacter",
        "about.title": "À propos",
        "about.bio1": "Je suis Luca, développeur Web et Web Mobile en formation. Né à Rome, en Italie, j'ai grandi dans un environnement où l'ordinateur faisait déjà partie de mon quotidien. Très jeune, j'ai été fasciné par le potentiel du numérique, ce qui m'a naturellement amené à explorer, tester, créer… et finalement me passionner pour le développement web.",
        "about.bio2": "Installé en France depuis maintenant 8 ans, j'ai progressivement orienté mon parcours vers le monde du web, attiré par la richesse de cet univers en constante évolution. Curieux de nature, j'aime comprendre comment les choses fonctionnent, résoudre des problèmes, et surtout concevoir des solutions simples, accessibles et efficaces.",
        "about.bio3": "Aujourd'hui, je me forme aux métiers du développement web et web mobile pour transformer cette passion en compétence professionnelle.",
        "about.cvBtn": "Télécharger mon CV",
        "projects.title": "Mes Projets",
        "projects.subtitle": "Ci-dessous, quelques exemples de réalisations effectuées durant la formation, le stage et plus encore :",
        "projects.overlay": "Voir le projet",
        "projects.viewSite": "Voir le site",
        "projects.viewApp": "Voir l'application",
        "projects.sourceCode": "Code source",
        "project.nelumbo.desc": "Mon tout premier site vitrine! Site fleuriste avec un style japonisant.",
        "project.detect.desc": "Site évènementiel sur la détection de métaux.",
        "project.calc.desc": "Petite application pour tester les fonctionnalités d'une calculette.",
        "project.bouncing.desc": "Classic screensaver logo.",
        "project.redlight.desc": "Le feu de circulation.",
        "project.blog.desc": "Projet élaboré collectivement avec Firebase.",
        "contact.title": "Me contacter",
        "contact.labelName": "Nom",
        "contact.labelEmail": "Email",
        "contact.labelMessage": "Message",
        "contact.submit": "Envoyer",
        "contact.placeholderName": "Votre nom",
        "contact.placeholderEmail": "votre@email.com",
        "contact.placeholderMessage": "Votre message...",
        "contact.success": "Merci ! Votre message a bien été envoyé.",
        "footer.coordinates": "Coordonnées",
        "footer.networks": "Réseaux",
        "footer.services": "Services",
        "footer.service1": "Développement Web sur mesure",
        "footer.service2": "Applications Laravel / PHP",
        "footer.service3": "API & Intégrations",
        "footer.service4": "UI/UX Design",
        "footer.copyright": "© 2025 De Chiara Luca. Tous droits réservés."
    },
    en: {
        skipLink: "Skip to main content",
        "nav.home": "Home",
        "nav.about": "About",
        "nav.projects": "Projects",
        "nav.contact": "Contact",
        "hero.title1": "Welcome, I am",
        "hero.title2": "Web Developer",
        "hero.subtitle": "I design my first web projects with passion and rigor, combining learning and creativity.",
        "hero.btnProjects": "View my projects",
        "hero.btnContact": "Contact me",
        "about.title": "About",
        "about.bio1": "I'm Luca, a Web and Mobile Web Developer in training. Born in Rome, Italy, I grew up in an environment where computers were already part of my daily life. From a young age, I was fascinated by the potential of technology, which naturally led me to explore, experiment, create… and ultimately develop a passion for web development.",
        "about.bio2": "Living in France for 8 years now, I've progressively steered my path towards the world of web, drawn by the richness of this ever-evolving universe. Curious by nature, I love understanding how things work, solving problems, and above all designing simple, accessible, and efficient solutions.",
        "about.bio3": "Today, I'm training in web and mobile web development to turn this passion into professional expertise.",
        "about.cvBtn": "Download my CV",
        "projects.title": "My Projects",
        "projects.subtitle": "Below, a few examples of work done during training, internship and more:",
        "projects.overlay": "View project",
        "projects.viewSite": "View site",
        "projects.viewApp": "View app",
        "projects.sourceCode": "Source code",
        "project.nelumbo.desc": "My very first showcase website! A florist site with a Japanese style.",
        "project.detect.desc": "Event website about metal detection.",
        "project.calc.desc": "A small app to test calculator features.",
        "project.bouncing.desc": "Classic screensaver logo.",
        "project.redlight.desc": "The traffic light.",
        "project.blog.desc": "A collaborative project built with Firebase.",
        "contact.title": "Contact me",
        "contact.labelName": "Name",
        "contact.labelEmail": "Email",
        "contact.labelMessage": "Message",
        "contact.submit": "Send",
        "contact.placeholderName": "Your name",
        "contact.placeholderEmail": "your@email.com",
        "contact.placeholderMessage": "Your message...",
        "contact.success": "Thank you! Your message has been sent.",
        "footer.coordinates": "Contact Info",
        "footer.networks": "Social",
        "footer.services": "Services",
        "footer.service1": "Custom Web Development",
        "footer.service2": "Laravel / PHP Applications",
        "footer.service3": "API & Integrations",
        "footer.service4": "UI/UX Design",
        "footer.copyright": "© 2025 De Chiara Luca. All rights reserved."
    },
    it: {
        skipLink: "Vai al contenuto principale",
        "nav.home": "Home",
        "nav.about": "Chi sono",
        "nav.projects": "Progetti",
        "nav.contact": "Contatti",
        "hero.title1": "Benvenuto, sono",
        "hero.title2": "Web Developer",
        "hero.subtitle": "Creo i miei primi progetti web con passione e rigore, unendo apprendimento e creatività.",
        "hero.btnProjects": "Vedi i miei progetti",
        "hero.btnContact": "Contattami",
        "about.title": "Chi sono",
        "about.bio1": "Sono Luca, Web Developer e Web Mobile in formazione. Nato a Roma, sono cresciuto in un ambiente dove il computer faceva già parte della mia vita quotidiana. Fin da giovane, sono stato affascinato dal potenziale del digitale, il che mi ha portato naturalmente a esplorare, sperimentare, creare… e infine ad appassionarmi allo sviluppo web.",
        "about.bio2": "Trasferito in Francia da ormai 8 anni, ho progressivamente orientato il mio percorso verso il mondo del web, attratto dalla ricchezza di questo universo in costante evoluzione. Curioso per natura, amo capire come funzionano le cose, risolvere problemi e soprattutto concepire soluzioni semplici, accessibili ed efficaci.",
        "about.bio3": "Oggi mi formo nei mestieri dello sviluppo web e mobile per trasformare questa passione in competenza professionale.",
        "about.cvBtn": "Scarica il mio CV",
        "projects.title": "I miei Progetti",
        "projects.subtitle": "Di seguito, alcuni esempi di lavori realizzati durante la formazione, lo stage e altro ancora:",
        "projects.overlay": "Vedi il progetto",
        "projects.viewSite": "Vedi il sito",
        "projects.viewApp": "Vedi l'app",
        "projects.sourceCode": "Codice sorgente",
        "project.nelumbo.desc": "Il mio primissimo sito vetrina! Un sito di fiori in stile giapponese.",
        "project.detect.desc": "Sito per un evento sulla rilevazione di metalli.",
        "project.calc.desc": "Una piccola applicazione per testare le funzionalità di una calcolatrice.",
        "project.bouncing.desc": "Il classico logo screensaver.",
        "project.redlight.desc": "Il semaforo.",
        "project.blog.desc": "Progetto realizzato collettivamente con Firebase.",
        "contact.title": "Contattami",
        "contact.labelName": "Nome",
        "contact.labelEmail": "Email",
        "contact.labelMessage": "Messaggio",
        "contact.submit": "Invia",
        "contact.placeholderName": "Il tuo nome",
        "contact.placeholderEmail": "tua@email.com",
        "contact.placeholderMessage": "Il tuo messaggio...",
        "contact.success": "Grazie! Il tuo messaggio è stato inviato.",
        "footer.coordinates": "Recapiti",
        "footer.networks": "Social",
        "footer.services": "Servizi",
        "footer.service1": "Sviluppo Web su misura",
        "footer.service2": "Applicazioni Laravel / PHP",
        "footer.service3": "API & Integrazioni",
        "footer.service4": "UI/UX Design",
        "footer.copyright": "© 2025 De Chiara Luca. Tutti i diritti riservati."
    }
};

const langToggle = document.getElementById('langToggle');
const langMenu = document.getElementById('langMenu');

function setLanguage(lang, animate = true) {
    const t = translations[lang];
    if (!t) return;

    const elements = document.querySelectorAll('[data-i18n]');

    if (animate) {
        elements.forEach(el => el.style.opacity = '0');

        setTimeout(() => {
            applyTranslations(t, elements);
            updateLangUI(lang);
            elements.forEach(el => el.style.opacity = '1');
        }, 200);
    } else {
        applyTranslations(t, elements);
        updateLangUI(lang);
    }
}

function applyTranslations(t, elements) {
    elements.forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (t[key]) {
            el.textContent = t[key];
        }
    });
    document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
        const key = el.getAttribute('data-i18n-placeholder');
        if (t[key]) {
            el.placeholder = t[key];
        }
    });
}

function updateLangUI(lang) {
    document.documentElement.lang = lang;
    localStorage.setItem('lang', lang);
    langToggle.innerHTML = lang.toUpperCase() + ' <span class="arrow">▾</span>';
    document.querySelectorAll('.lang-option').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.lang === lang);
    });
}

function closeLangMenu() {
    langMenu.classList.remove('open');
    langToggle.classList.remove('open');
    langToggle.setAttribute('aria-expanded', 'false');
}

langToggle.addEventListener('click', () => {
    const isOpen = langMenu.classList.toggle('open');
    langToggle.classList.toggle('open');
    langToggle.setAttribute('aria-expanded', isOpen);
});

document.addEventListener('click', (e) => {
    if (!e.target.closest('.lang-dropdown')) {
        closeLangMenu();
    }
});

document.querySelectorAll('.lang-option').forEach(btn => {
    btn.addEventListener('click', () => {
        setLanguage(btn.dataset.lang);
        closeLangMenu();
    });
});

const savedLang = localStorage.getItem('lang') || 'fr';
if (savedLang !== 'fr') {
    setLanguage(savedLang, false);
}
